% e-book
\documentclass[oneside,12pt]{book}
%% screen paper layout (A5 landscape)
\usepackage[paperwidth=210mm,paperheight=148mm,margin=5mm]{geometry}
%%% font setup for screen reading
%\renewcommand{\familydefault}{\sfdefault}\normalfont
%% hyperlinks pdf style
\usepackage[unicode,colorlinks=true]{hyperref}
%,pdfborderstyle={/S/U/W 1}
%% graphics
\usepackage[pdftex]{graphicx}
\newcommand{\fig}[3]{\bigskip\noindent\includegraphics[#3]{#2}\textbf{#1}\bigskip}
\newcommand{\bibfig}[1]{\includegraphics[height=0.3\textheight]{#1}}
%\newcommand{\figx}[2]{\includegraphics[#1]{#2}}
% [nosep] option in lists/enums
\usepackage{enumitem}
% frame box
\usepackage{framed}

% Cyrillization
\usepackage[T1,T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}

% relative sectioning
\usepackage{ifthen}
\newcounter{secdepth}\setcounter{secdepth}{0}
\newcommand{\secup}{\addtocounter{secdepth}{1}}
\newcommand{\secdown}{\addtocounter{secdepth}{-1}}
\newcommand{\secrel}[1]{
\ifthenelse{\equal{\value{secdepth}}{0}}{\part{#1}}{}
\ifthenelse{\equal{\value{secdepth}}{-1}}{\chapter{#1}}{}
\ifthenelse{\equal{\value{secdepth}}{-2}}{\section{#1}}{}
\ifthenelse{\equal{\value{secdepth}}{-3}}{\subsection{#1}}{}
\ifthenelse{\equal{\value{secdepth}}{-4}}{\subsubsection{#1}}{}
}
\newcommand{\secly}[1]{\section*{#1}\addcontentsline{toc}{section}{#1}}
\newcommand{\subsecly}[1]{\section*{#1}\addcontentsline{toc}{subsection}{#1}}

% computer-related markup: manuals, listings, CS

%% typical =objects
\newcommand{\file}[1]{\textbf{#1}}
\newcommand{\dir}[1]{\textbf{\textit{#1}}}
\newcommand{\var}[1]{\texttt{#1}}
\newcommand{\addr}[1]{\texttt{#1}}
\newcommand{\prog}[1]{\textbf{#1}}
\newcommand{\class}[1]{\textbf{#1}}

%% languages
\newcommand{\ci}{Си}
\newcommand{\cpp}{$C^+_+$}
\newcommand{\py}{$Python$}
\newcommand{\bi}{$bI$}
\newcommand{\st}{$SmallTalk$}
\newcommand{\lisp}{$Lisp$}
\newcommand{\ml}{$ML$}

%% OSes
\newcommand{\linux}{$Linux$}
\newcommand{\debian}{$Debian\ GNU/Linux$}
\newcommand{\win}{$Windows$}

%% std.progs
\newcommand{\vim}{\prog{(g)Vim}}
\newcommand{\gnut}{\prog{GNU Toolchain}}
\newcommand{\qemu}{\prog{Qemu}}
\newcommand{\mingw}{\prog{MinGW}}

%% MCU
\newcommand{\cm}{Cortex-M}

%% listings
\usepackage{verbatim}
\usepackage{listings}
\lstset{
basicstyle=\small,
frame=single,
numbers=left,numberstyle=\small,numbersep=2mm,
tabsize=4,
keywordstyle=\textbf,
commentstyle=\textit
}
\newcounter{listingnum}
\newcommand{\lstx}[2]{%\refstepcounter{listingnum}
	\lstinputlisting[title=#1]{#2}}
\newcommand{\lst }[3]{%\refstepcounter{listingnum}
	\lstinputlisting[title=#1,language=#3]{#2}}
\newcommand{\lstv}[2]{\refstepcounter{listingnum}
	\paragraph{Листинг \thelistingnum: #1}\verbatiminput{#2}}

% misc
%% typical macros
\newcommand{\email}[1]{$<$\href{mailto:#1}{#1}$>$}
\newcommand{\note}[1]{\footnote{\ #1}}
\renewcommand{\emph}[1]{\textbf{#1}}
\newcommand{\cp}[1]{\note{\copyright\ #1}}
\newcommand{\term}[1]{\textit{#1}}
\newcommand{\termdef}[2]{\textbf{\textit{#1}}}

% Universal LaTeX headers for e-book publications
\documentclass[oneside,10pt]{book}
%% mobile phone optimized
%%%\usepackage[paperwidth=210mm,paperheight=145mm,margin=2mm]{geometry}
%%% honor 3C 108 mm x 62 mm scaled 1.1 = 118.8 x 68.2
\usepackage[paperwidth=118.8mm,paperheight=68.2mm,margin=2mm]{geometry}
%% font setup for screen reading
\renewcommand{\familydefault}{\sfdefault}\normalfont
%% hyperlinks pdf style
\usepackage[unicode,colorlinks=true]{hyperref}
%% fix heading styles for tiny paper
\usepackage{titlesec}
\titleformat{\chapter}{\Large\bfseries}{\thechapter.}{1em}{}
\titleformat{\section}{\large\bfseries}{\thesection.}{1em}{}

% graphics
\usepackage[pdftex]{graphicx}
\newcommand{\fig}[3]{\bigskip\noindent\includegraphics[#3]{#2}\textbf{#1}\bigskip}

% xcolor fixes
\usepackage{xcolor}
\definecolor{red}{rgb}{0.7,0,0}		% R
\definecolor{RED}{rgb}{0.7,0,0}
\definecolor{green}{rgb}{0,0.7,0}	% G
\definecolor{GREEN}{rgb}{0,0.7,0}
\definecolor{blue}{rgb}{0,0,0.7}	% B
\definecolor{BLUE}{rgb}{0,0,0.7}

% Cyrillization
%% \usepackage[T1,T2A]{fontenc}
\usepackage[utf8]{inputenc}
%% \usepackage[cp1251]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{indentfirst}

% relative sectioning
\usepackage{ifthen}
\newcounter{secdepth}\setcounter{secdepth}{0}
\newcommand{\secup}{\addtocounter{secdepth}{1}}
\newcommand{\secdown}{\addtocounter{secdepth}{-1}}
\newcommand{\secrel}[1]{
\ifthenelse{\equal{\value{secdepth}}{0}}{\part{#1}}{}
\ifthenelse{\equal{\value{secdepth}}{-1}}{\chapter{#1}}{}
\ifthenelse{\equal{\value{secdepth}}{-2}}{\section{#1}}{}
\ifthenelse{\equal{\value{secdepth}}{-3}}{\subsection{#1}}{}
\ifthenelse{\equal{\value{secdepth}}{-4}}{\subsubsection{#1}}{}
}
\newcommand{\secly}[1]{
\section*{#1}
\addcontentsline{toc}{section}{#1}
}

% computer-related markup: manuals, listings, CS

%% software menu & keys
\usepackage[os=win]{menukeys}

%% listings
\usepackage{verbatim}
\usepackage{listings}
\lstset{
basicstyle=\small,
frame=single,
numbers=left,numberstyle=\small,numbersep=2mm,
xleftmargin=3mm,xrightmargin=2mm,
tabsize=4,
keywordstyle=\color{red},
commentstyle=\color{blue},
extendedchars=\true
}
\newcounter{lstcounter}
%%% no syntax
\newcommand{\lst}[1]{\refstepcounter{lstcounter}
	\noindent\\\begin{minipage}{\textwidth}
	\lstinputlisting{#1}
	\end{minipage}\\}
\newcommand{\lsts}[2]{\refstepcounter{lstcounter}
	\noindent\\\begin{minipage}{\textwidth}
	\lstinputlisting[language=#2]{#1}
	\end{minipage}\\}
\newcommand{\lstl}[1]{\refstepcounter{lstcounter}
	\lstinputlisting{#1}}
%%% with syntax
\newcommand{\lstx}[3]{\refstepcounter{lstcounter}
	\noindent\\\begin{minipage}{\textwidth}
	\lstinputlisting[title=#1,language=#3]{#2}
	\end{minipage}\\}
\newcommand{\lstxl}[3]{\refstepcounter{lstcounter}
	\lstinputlisting[title=#1,language=#3]{#2}}
% with title
\newcommand{\lstt}[2]{\refstepcounter{lstcounter}
	\lstinputlisting[title=#1]{#2}}

\usepackage{../texheader/lstmk}\lstdefinestyle{mk}{language=mk}
%\usepackage{../texheader/lstrkt}\lstdefinestyle{rkt}{language=rkt}

%% languages
\newcommand{\ci}{Си}
\newcommand{\cpp}{$C^+_+$}
\newcommand{\py}{$Python$}
\newcommand{\java}{$Java$}
\newcommand{\racket}{$Racket$}
\newcommand{\lisp}{$Lisp$}

%% OSes
\newcommand{\win}{$Windows$}
\newcommand{\linux}{$Linux$}

%% syntax
\newcommand{\class}[1]{\textcolor{green}{\texttt{#1}}}
\newcommand{\var}[1]{\textbf{#1}}
\newcommand{\file}[1]{\textbf{#1}}
\newcommand{\prog}[1]{\textbf{#1}}

%% std.programs
\newcommand{\flex}{\textbf{flex}}
\newcommand{\bison}{\textbf{bison}}
\newcommand{\make}{\textbf{make}}
\newcommand{\gvim}{$_g$\prog{vim}}
\newcommand{\git}{\textbf{git}}

% [nosep] option in lists/enums
\usepackage{enumitem}
% frame box
\usepackage{framed}
% indexing
\usepackage{makeidx}\makeindex

% misc
\newcommand{\email}[1]{$<$\href{mailto:#1}{#1}$>$}
\renewcommand{\emph}[1]{\textcolor{red}{#1}}
\newcommand{\term}[1]{\textcolor{green}{#1}}
\newcommand{\termdef}[2]{\textcolor{green}{#1}\index{#2}}
\newcommand{\note}[1]{\,\footnote{\ #1}}
\newcommand{\ru}[1]{\textcolor{blue}{#1}}
